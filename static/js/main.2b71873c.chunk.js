(this["webpackJsonplottery-react"]=this["webpackJsonplottery-react"]||[]).push([[0],{218:function(e,t,n){},221:function(e,t,n){},235:function(e,t){},237:function(e,t){},242:function(e,t){},243:function(e,t){},270:function(e,t){},272:function(e,t){},282:function(e,t){},284:function(e,t){},294:function(e,t){},296:function(e,t){},311:function(e,t){},345:function(e,t){},346:function(e,t){},416:function(e,t){},418:function(e,t){},423:function(e,t){},425:function(e,t){},432:function(e,t){},444:function(e,t){},447:function(e,t){},452:function(e,t){},536:function(e,t,n){"use strict";n.r(t);var a=n(54),r=n.n(a),s=n(209),c=n.n(s),i=(n(218),n(78)),o=n(4),u=n(5),l=n(11),h=n(10),d=n(18),b=n.n(d),p=(n(220),n(221),n(113)),m=n.n(p),f=new m.a;void 0!==window.ethereum&&(window.ethereum.request({method:"eth_requestAccounts"}),f=new m.a(window.ethereum));var j=f,y=[{inputs:[],stateMutability:"nonpayable",type:"constructor",constant:void 0,payable:void 0,signature:"constructor"},{inputs:[],name:"getParticipants",outputs:[[{name:"",type:"address[]"}]],stateMutability:"view",type:"function",constant:!0,payable:void 0,signature:"0x5aa68ac0"},{inputs:[],name:"getRaffleCurrentValue",outputs:[[Object]],stateMutability:"view",type:"function",constant:!0,payable:void 0,signature:"0xeca8c800"},{inputs:[],name:"joinRaffle",outputs:[],stateMutability:"payable",type:"function",constant:void 0,payable:!0,signature:"0x136b3392"},{inputs:[],name:"manager",outputs:[[{name:"",type:"address"}]],stateMutability:"view",type:"function",constant:!0,payable:void 0,signature:"0x481c6a75"},{inputs:[],name:"numPlayers",outputs:[[{name:"",type:"uint256"}]],stateMutability:"view",type:"function",constant:!0,payable:void 0,signature:"0x97b2f556"},{inputs:[[Object]],name:"players",outputs:[[Object]],stateMutability:"view",type:"function",constant:!0,payable:void 0,signature:"0xf71d96cb"},{inputs:[],name:"selectWinnerRestricted",outputs:[],stateMutability:"nonpayable",type:"function",constant:void 0,payable:void 0,signature:"0x17b96fce"},{inputs:[],name:"winner",outputs:[[{name:"",type:"address"}]],stateMutability:"view",type:"function",constant:!0,payable:void 0,signature:"0xdfbf53ae"},{inputs:[],name:"winnerHasBeenChosen",outputs:[[Object]],stateMutability:"view",type:"function",constant:!0,payable:void 0,signature:"0x966b8c1d"}],x=new j.eth.Contract(y,"0x72E67b75EA7F21D704618eFCA3ae84eF64e5F4D1"),g=n(6),v=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={manager:"",balance:"",value:"",message:"",numPlayers:"0",error:""},e.onSubmit=function(){var t=Object(i.a)(b.a.mark((function t(n){var a,r,s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,j.eth.getAccounts();case 4:return a=t.sent,e.setState({message:"Waiting for the transaction to complete..."}),t.next=8,x.methods.joinRaffle().send({from:a[0],value:j.utils.toWei(e.state.value,"ether")});case 8:return t.next=10,x.methods.numPlayers().call();case 10:return r=t.sent,t.next=13,j.eth.getBalance(x.options.address);case 13:s=t.sent,e.setState({message:"You have been entered!",numPlayers:r,balance:s,value:""}),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(1),e.setState({message:"An error occurred. Please try again."});case 20:case"end":return t.stop()}}),t,null,[[1,17]])})));return function(e){return t.apply(this,arguments)}}(),e.onClick=function(){var t=Object(i.a)(b.a.mark((function t(n){var a,r,s,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j.eth.getAccounts();case 3:return a=t.sent,e.setState({message:"Waiting for the transaction to choose a winner..."}),t.next=7,x.methods.selectWinnerRestricted().send({from:a[0]});case 7:return t.next=9,x.methods.numPlayers().call();case 9:return r=t.sent,t.next=12,x.methods.winner().call();case 12:return s=t.sent,t.next=15,j.eth.getBalance(x.options.address);case 15:c=t.sent,e.setState({message:"A winner has been chosen! The winner is address ".concat(s," and the lottery was reset."),numPlayers:r,balance:c,value:""}),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(0),e.setState({message:"An error occurred. Please try again."});case 22:case"end":return t.stop()}}),t,null,[[0,19]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=Object(i.a)(b.a.mark((function e(){var t,n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.methods.manager().call();case 3:return t=e.sent,e.next=6,x.methods.numPlayers().call();case 6:return n=e.sent,e.next=9,j.eth.getBalance(x.options.address);case 9:a=e.sent,this.setState({manager:t,balance:a,numPlayers:n}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),this.setState({error:!0});case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"clickToCopyManager",value:function(e){navigator.clipboard.writeText(e),alert("Copied the text: "+e)}},{key:"render",value:function(){var e=this;return Object(g.jsx)("div",{className:"container",children:Object(g.jsxs)("header",{className:"App-header",children:[this.state.error&&Object(g.jsx)("div",{className:"row",id:"errorMessage",children:Object(g.jsxs)("strong",{children:["The MetaMask browser extension was not detected. This application requires",Object(g.jsx)("a",{href:"https://www.google.com/search?q=metamask+extension",target:"_blank",rel:"noreferrer",children:" the MetaMask browser extension "}),"to function properly."]})}),Object(g.jsx)("img",{id:"ethLogo",src:"https://ethereum.org/static/c3bcc8c47890ffd2a2c329972c73d0fd/702da/ethereum-logo-portrait-black-gray.webp",alt:"Ethereum Lottery Contract"}),Object(g.jsx)("div",{className:"row",children:Object(g.jsx)("h2",{children:"Ethereum Lottery Contract"})}),Object(g.jsx)("div",{className:"row",children:Object(g.jsxs)("h3",{children:["Made With Solidity and React by ",Object(g.jsx)("a",{href:"https://www.richardkronick.com/",target:"_blank",rel:"noreferrer",children:"Richard Kronick"})]})}),Object(g.jsx)("hr",{}),Object(g.jsx)("div",{className:"row",children:Object(g.jsx)("h4",{children:"*Note that this is on the Ethereum Rinkeby test network ONLY - This is a demo for development purposes (not real ETH)."})}),Object(g.jsx)("p",{children:Object(g.jsx)("a",{href:"https://faucets.chain.link/rinkeby",target:"_blank",rel:"noreferrer",children:"Need some test ETH?"})}),Object(g.jsxs)("p",{children:["See the ",Object(g.jsx)("a",{href:"https://github.com/richardkronick/Ethereum-Rafflle-Lottery-Solidity-Contract/blob/main/lottery.sol",target:"_blank",rel:"noreferrer",children:"Ethereum contract written in Solidity here"})," and the ",Object(g.jsx)("a",{href:"https://github.com/richardkronick/raffle-lottery-ethereum-react",target:"_blank",rel:"noreferrer",children:"React code here."})]}),Object(g.jsxs)("p",{children:[Object(g.jsx)("hr",{}),"This Ethereum lottery contract is managed by the following address: ",Object(g.jsxs)("span",{className:"ethAddress",children:[this.state.manager,"   "]}),Object(g.jsx)("button",{className:"myBtn btn btn-sm",onClick:function(){return e.clickToCopyManager(e.state.manager)},children:"Click to Copy"}),Object(g.jsx)("hr",{}),"Currently there are ",this.state.numPlayers," participant(s) who have entered to win the lottery contract.",Object(g.jsx)("hr",{}),"The current prize value is ",j.utils.fromWei(this.state.balance,"ether")," ETH.",Object(g.jsx)("hr",{})]}),Object(g.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(g.jsx)("strong",{children:"Enter the ETH lottery and try your luck!"}),Object(g.jsxs)("div",{children:[Object(g.jsx)("label",{children:"Amount of ETH to enter:"}),Object(g.jsx)("input",{value:this.state.value,onChange:function(t){return e.setState({value:t.target.value})}}),Object(g.jsx)("button",{className:"myBtn btn",children:"Enter and Try Your Luck!"})]})]}),Object(g.jsx)("div",{children:Object(g.jsx)("span",{id:"message",children:Object(g.jsx)("strong",{children:this.state.message})})}),Object(g.jsx)("hr",{}),Object(g.jsxs)("p",{id:"rules",children:[Object(g.jsx)("strong",{children:"Rules: (read before entering)"})," You will receive one entry per 0.01 ETH (So, for example, 0.05 ETH will give you 5 total entries), up to 100 entries per transaction (1 ETH), regardless of how much you send. In other words, sending anything over 1 ETH, will result in 100 entries for you. Once there have been more than 200 entries, a winner will be chosen automatically at random. Or the manager can choose a winner at any time below.",Object(g.jsx)("hr",{})]}),Object(g.jsx)("div",{children:Object(g.jsx)("strong",{children:"Are you the manager? If so you can pick a winner at any time."})}),Object(g.jsx)("button",{type:"button",className:" myBtn btn",onClick:this.onClick,children:"Select a random winner!"})]})})}}]),n}(a.Component),w=v,O=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,540)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))};c.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(w,{})}),document.getElementById("root")),O()}},[[536,1,2]]]);
//# sourceMappingURL=main.2b71873c.chunk.js.map